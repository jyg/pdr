#N canvas 95 50 887 639 10;
#X obj 227 186 mtx_transpose;
#X obj 239 241 mtx_mul;
#X text 212 153 MATRIX A;
#X obj 240 217 t a a;
#X text 379 189 MATRIX B;
#X obj 224 305 mtx_mul;
#N canvas 142 50 844 578 theory/explanations/sources 0;
#X text 106 332 l=(A A) A B;
#X text 130 325 T -1 T;
#X text 47 157 l=;
#X text 68 116 a;
#X text 67 127 b;
#X text 67 139 c;
#X text 68 152 d;
#X text 67 163 e;
#X text 69 174 f;
#X text 68 183 g;
#X text 70 195 h;
#X text 143 158 B=;
#X text 161 119 X1;
#X text 161 132 Y1;
#X text 162 143 X2;
#X text 162 156 Y2;
#X text 162 170 X3;
#X text 163 183 Y3;
#X text 164 194 X4;
#X text 164 203 Y4;
#X text 122 56 Al=B;
#X text 21 -27 Transposition from http://alumni.media.mit.edu/~cwren/interpolator/
;
#X text 43 29 We have to find the vector l that meets the equation
:;
#X text 38 90 where;
#X text 43 235 B contains the coords of 4 reference points in new system
;
#X text 233 148 (Matrix A is as defined in http://alumni.media.mit.edu/~cwren/interpolator/)
;
#X text 451 -6 x y : coords given by input device (example : wiimote)
;
#X text 455 18 X Y : coords mapped in new system;
#X text 44 383 When l is found \, we can easily compute new coords
\, for any point :;
#X text 60 425 ax+by+c;
#X text 45 430 X=________;
#X text 60 443 gx+hy+1;
#X text 190 443 gx+hy+1;
#X text 175 430 Y=________;
#X text 190 425 dx+ey+f;
#X restore 544 85 pd theory/explanations/sources;
#X obj 595 584 outlet error;
#X obj 224 343 mtx_mul;
#X text 281 381 l=(A A) A B;
#X text 305 374 T -1 T;
#X obj 233 267 mtx_pinverse;
#N canvas 0 50 853 445 Matrix_A_creation 0;
#X obj 50 496 outlet;
#X obj 124 90 unpack f f f f f f f f;
#X obj 71 160 t f f;
#X obj 135 32 inlet 4points_source;
#X obj 402 41 inlet 4points_target;
#X obj 390 98 unpack f f f f f f f f;
#X obj 549 153 * -1;
#X obj 516 158 * -1;
#X obj 484 157 * -1;
#X obj 450 158 * -1;
#X obj 418 158 * -1;
#X obj 386 159 * -1;
#X obj 354 159 * -1;
#X obj 322 159 * -1;
#X obj 186 305 *;
#X obj 215 303 *;
#X obj 253 303 *;
#X obj 277 302 *;
#X obj 432 300 *;
#X obj 407 300 *;
#X obj 360 301 *;
#X obj 332 303 *;
#X obj 54 360 pack f f f f f f f f f f f f f f f f f f f f f f f f
;
#X obj 572 298 *;
#X obj 547 298 *;
#X obj 500 299 *;
#X obj 472 301 *;
#X obj 720 293 *;
#X obj 695 293 *;
#X obj 648 294 *;
#X obj 620 296 *;
#X msg 61 395 matrix 8 8 \$1 \$2 1 0 0 0 \$9 \$10 0 0 0 \$1 \$2 1 \$11
\$12 \$3 \$4 1 0 0 0 \$13 \$14 0 0 0 \$3 \$4 1 \$15 \$16 \$5 \$6 1
0 0 0 \$17 \$18 0 0 0 \$5 \$6 1 \$19 \$20 \$7 \$8 1 0 0 0 \$21 \$22
0 0 0 \$7 \$8 1 \$23 \$24;
#X connect 1 0 2 0;
#X connect 1 1 15 0;
#X connect 1 1 17 0;
#X connect 1 1 22 1;
#X connect 1 2 22 2;
#X connect 1 2 21 0;
#X connect 1 2 19 0;
#X connect 1 3 22 3;
#X connect 1 3 18 0;
#X connect 1 3 20 0;
#X connect 1 4 22 4;
#X connect 1 4 26 0;
#X connect 1 4 24 0;
#X connect 1 5 22 5;
#X connect 1 5 25 0;
#X connect 1 5 23 0;
#X connect 1 6 22 6;
#X connect 1 6 30 0;
#X connect 1 6 28 0;
#X connect 1 7 22 7;
#X connect 1 7 29 0;
#X connect 1 7 27 0;
#X connect 2 0 22 0;
#X connect 2 1 14 0;
#X connect 2 1 16 0;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 5 0 13 0;
#X connect 5 1 12 0;
#X connect 5 2 11 0;
#X connect 5 3 10 0;
#X connect 5 4 9 0;
#X connect 5 5 8 0;
#X connect 5 6 7 0;
#X connect 5 7 6 0;
#X connect 6 0 28 1;
#X connect 6 0 27 1;
#X connect 7 0 30 1;
#X connect 7 0 29 1;
#X connect 8 0 24 1;
#X connect 8 0 23 1;
#X connect 9 0 26 1;
#X connect 9 0 25 1;
#X connect 10 0 19 1;
#X connect 10 0 18 1;
#X connect 11 0 21 1;
#X connect 11 0 20 1;
#X connect 12 0 16 1;
#X connect 12 0 17 1;
#X connect 13 0 14 1;
#X connect 13 0 15 1;
#X connect 14 0 22 8;
#X connect 15 0 22 9;
#X connect 16 0 22 10;
#X connect 17 0 22 11;
#X connect 18 0 22 15;
#X connect 19 0 22 14;
#X connect 20 0 22 13;
#X connect 21 0 22 12;
#X connect 22 0 31 0;
#X connect 23 0 22 19;
#X connect 24 0 22 18;
#X connect 25 0 22 17;
#X connect 26 0 22 16;
#X connect 27 0 22 23;
#X connect 28 0 22 22;
#X connect 29 0 22 21;
#X connect 30 0 22 20;
#X connect 31 0 0 0;
#X restore 266 103 pd Matrix_A_creation;
#X obj 263 16 inlet 4points_source;
#X msg 380 212 matrix 8 1 \$1 \$2 \$3 \$4 \$5 \$6 \$7 \$8;
#X obj 267 154 t a a;
#X obj 223 466 s \$1.mtx;
#X obj 124 465 s \$1.geometry;
#X msg 415 120 0 0 1 0 1 1 0 1;
#X obj 421 91 loadbang;
#X obj 701 332 u_loader \$1 \$0;
#X obj 701 240 u_dispatch \$0 geometry;
#X obj 750 120 list prepend geometry;
#X obj 750 147 list trim;
#X obj 411 376 list trim;
#X obj 411 349 list prepend mtx;
#X text 426 140 remplace inlet 4points_target;
#X obj 224 408 r \$0-mtx;
#X obj 700 268 u_dispatch \$0 mtx;
#X obj 124 442 r \$0-geometry;
#X obj 238 443 list trim;
#X connect 0 0 3 0;
#X connect 1 0 11 0;
#X connect 3 0 1 0;
#X connect 3 1 5 1;
#X connect 5 0 8 0;
#X connect 8 0 25 0;
#X connect 11 0 5 0;
#X connect 11 1 7 0;
#X connect 12 0 15 0;
#X connect 13 0 12 0;
#X connect 13 0 22 0;
#X connect 14 0 8 1;
#X connect 15 0 0 0;
#X connect 15 1 1 1;
#X connect 18 0 12 1;
#X connect 18 0 14 0;
#X connect 19 0 18 0;
#X connect 21 0 28 0;
#X connect 22 0 23 0;
#X connect 23 0 21 0;
#X connect 24 0 21 0;
#X connect 25 0 24 0;
#X connect 27 0 30 0;
#X connect 29 0 17 0;
#X connect 30 0 16 0;
